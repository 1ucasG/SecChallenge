<!DOCTYPE html>
<html lang="en">

<body class="host_version"> 

	<div class="all-title-box">
		<div class="container text-center">
			<h1>MitmProxy<span class="m_1"></span></h1>
		</div>
	</div>
	
		<!-- Basic -->
	<div class="container pt-5 align-items-center">
		<div class="row align-items-center ">
			<div class="col-8 offset-2">
	
				<h2 class="mb-3">1. Objectif</h2>
				<p >
					L'objectif de ce tutoriel est de vous présenter l'outil mitmproxy disponible en ligne de commande. 
					</br>
					Cet outil permet d'afficher les requêtes http et les réponses http qui transite par votre ordinateur.
					</br>
                    
					</br>
					Vous pourrez trouver plus d'informations ici : <a  class="link-primary" href="https://mitmproxy.org/">https://mitmproxy.org/</a>
				    </br>
				</p>    
				
				<h2 class="mb-3">2. Configuration</h2>
				
				<p>
                    Ce tuto met a disposition par le biais de l'application Docker et docker-compose, 3 machines connectées sur un même réseau local.
					</br>
                    Il est nécessaire de récuperer le fichier <b>docker-compose.yml</b> qui permet de lancer les 3 machines.<br>
                
                    Téléchargez le <a class="link-primary" href="./Downloads/mitmproxy/docker-compose.yml">docker-compose.yml</a><br>
                    
					Les commandes qui permettent de lancer les 3 machines sont les suivantes: <br>
                    <kbd class="ms-3">bash> docker-compose up -d</kbd><br>
                    
                   	Nous avons besoin de nous connecter à celle de Eve via la commande :
                    <br>
                    <kbd class="ms-3">bash> docker exec -it mitm_eve /bin/bash</kbd><br>
					<br>


				
				</p>   

				<h2 class="mb-3">3. Les étapes</h2>
				<p >
					Ici nous avons déjà une machine qui à effectué un arp-poisoning des victimes. Pour en savoir plus : <a class="link-primary" href="./tuto.php?tuto=16">Voici notre tuto</a><br>
					Avant tout il est nécessaire de connaitre le nom de notre interface réseau pour cela on peut taper la commande :
					</br>
					<kbd class="ms-3">bash> ifconfig</kbd>
					</br>
					<img src="images/mitmproxy/mitmproxy1.png" alt="" class="img-fluid">
					</br>
					Dans notre cas l'interface est eth0.
					</br>
					Il faut maintenant rediriger les requêtes http de notre victime vers la source souhaitée.
					</br>
					On va utiliser la commade iptables de la facon suivante :
					</br>
					<kbd class="ms-3">bash> iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8080</kbd>
                    </br>
					Cette commande indique que l'on va router les requêtes tcp recues par l'interface eth0 sur le port 80 vers le port 8080.
					</br>
					Ainsi tout les requêtes émises par Alice seront bien envoyées à Bob.
					</br>
					
					On peut maintenant lance le mitmproxy en utilisant la commande suivante :
					</br>
					<kbd class="ms-3">bash> mitmproxy -m transparent</kbd>

					</br>
					<img src="images/mitmproxy/mitmproxy2.png" alt="" class="img-fluid">
					</br>
					On a alors une interface qui s'ouvre. Pour naviger vous pouvez utiliser les flèches du clavier. Pour sélectionner, la touche entrée et pour sortir d'une page ou du programme la touche q.
					</br>
					On peut maintenant analyser les requêtes http de Alice et peut être trouver son mot de passe.
					<img src="images/mitmproxy/mitmproxy3.png" alt="" class="img-fluid">

				</p> 



				<h2 class="mb-3">4. Bonus : vidéo démonstration</h2>
				<p>
					Vous trouverez ci-dessous une vidéo de démonstration:
					</br>
					<iframe width="560" height="315" src="videos/mitmproxy.mp4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
				</p> 

				
			</div> <!-- end of col -->
		</div> <!-- end of row -->
</body>
</html>